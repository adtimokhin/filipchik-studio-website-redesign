---
import svgReference from '../../public/square-filipchik-logo.svg'; // svgReference === '/src/logo_alt.svg'
import svgArrowIconReference from "../../public/icons/direct_arrow.svg"
import Link from './Link.astro';
---

<!-- TODO: Add correct horizontal spacing -->
<nav class="w-full h-fit pt-8 flex flex-1 justify-between items-center px-10 fixed top-0 z-50 overflow-y-hidden">

    <a href="/">
        <img src={svgReference.src} alt="Filipchik Studios Logo" draggable="false" class="desktop:w-20 tablet:w-20 phone:w-8"/>
    </a>


<!-- Burger Menu Icon for smaller screens -->
<div id="burger-menu" class="phone:block tablet:hidden hidden">
    <button id="burger-button" class="text-text focus:outline-none">
        <svg class="w-6 h-6 phone:w-8 phone:h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>
</div>

    <!-- TODO: Add a burger menu for phone screens -->
    <div class="phone:hidden tablet:flex justify-end w-fit gap-x-2 nav-link text-text items-center">
        <div id="nav-links" class="flex items-center gap-x-2 transition-transform duration-500">
            <a href="/careers">КАРЬЕРА</a>
            <!-- Dot -->
            <span class="h-[5px] w-[5px] rounded-full bg-text"/>
            <a href="/online/talks">МЫ ОНЛАЙН</a>
            <!-- Dot -->
            <span class="h-[5px] w-[5px] rounded-full bg-text"/>
        </div>

        <!-- CTA Link -->
        <a href="/#contact" class="nav-link bg-accent text-white rounded-full cta-link">
            
            <p>СВЯЗАТЬСЯ</p>
            <img src={svgArrowIconReference.src} alt="move on the page arrow" class="w-5" loading="eager" />
        </a>
    </div>

</nav>

<script>
    let lastScrollTop = 0;
    const navLinks = document.getElementById('nav-links');

    window.addEventListener('scroll', () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > 300) {
            if (scrollTop > lastScrollTop) {
                // Downscroll
                navLinks.style.transform = 'translateY(-400%)';
            } else {
                // Upscroll
                navLinks.style.transform = 'translateY(0)';
            }
        } else {
            navLinks.style.transform = 'translateY(0)';
        }

        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // For Mobile or negative scrolling
    });
</script>

<style>
    #nav-links {
        will-change: transform;
    }

    #nav-links a {
        position: relative;
        display: inline-block;
        text-decoration: none;
        color: inherit;
        transition: color 0.3s ease;
    }

    #nav-links a::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background-color: currentColor;
        transition: width 0.3s ease;
    }

    #nav-links a:hover::after {
        width: 100%;
    }

    .cta-link {
        position: relative;
        width: 150px;
        display: inline-flex;
        align-items: center;
        justify-content: space-center;
        overflow: hidden;
        padding: 20px 30px;
        transition: color 0.3s ease;
    }

    .cta-link p {
        position: absolute;
        left: 10px;
        transition: transform 0.3s ease;
    }

    .cta-link img {
        position: absolute;
        right: 10px;
        transition: transform 0.3s ease;
    }

    /* FIXME: I do not like how this second arrow appears from the top */
    .cta-link::before {
        content: url("/icons/direct_arrow.svg");
        position: absolute;
        left: 0px;
        top: 10px;
        transform: translate(-100%, -50%);
        transition: transform 0.3s ease;
    }

    .cta-link:hover p {
        transform: translateX(30px);
    }

    .cta-link:hover img {
        transform: translateX(30px);
    }

    .cta-link:hover::before {
        transform: translateX(10px);
    }
</style>
